<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405: Lab 2: Lab 2: Control Freaks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ME 405: Lab 2
   </div>
   <div id="projectbrief">Closed Loop Controller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Lab 2: Control Freaks </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p >In the words of Master Yoda, "Control, control, you must learn control". </p><div class="image">
<img src="yoda.jpg" alt=""/>
<div class="caption">
Figure 1: The greatest Jedi who ever existed, Master Yoda [1]</div></div>
<p> Speaking of control, this lab assignment involved applying positional control to a DC motor. We used a closed loop Kp controller in order to adjust the position of the motor. Closed loop control is necessary to find an acceptable speed at which to run the motor at without causing overshoot and steady state error. A step response is a good indicator of these faults within a controller. Multiple step responses of the motor running at different Kp values are shown within this lab assignment. The Kp value is a gain. The actuation signal which controls the motor position is found by multiplying the Kp value by the setpoint position minus the measured position. This is shown in the block diagram in Figure 2. A larger Kp value amplifies the actuation signal, which means that the motor will reach the specified setpoint position at a faster rate. The setpoint is 2 times pi radians, which is a full revolution of the motor </p><div class="image">
<img src="block_diagram.JPG" alt=""/>
<div class="caption">
Figure 2: Positional Control Closed Loop Block Diagram [2]</div></div>
 <h1><a class="anchor" id="ss_serial"></a>
Serial Interaction</h1>
<p >This lab involved serial interaction between the PC and the Nucleo. This was necessary in order to provide a user interface that would allow a user to input a Kp value on the PC front end that could be recognized on the Nucleo backend. The process behind serial communication is as follows. [1] The user runs <a class="el" href="main_8py.html" title="Implements proportional control for motors connected to nucleo board provided in ME 405 lab.">main.py</a> on the Nucleo, which has the utilization of the MotorDriver <a class="el" href="namespace_encoder_driver.html">EncoderDriver</a>, and Closed Loop Controller. The user is prompted in this script to enter a Kp value. The program collects the time and data based based on the set point. The time and data are printed. Print acts like a uart.write(). <br  />
 [2] The <a class="el" href="_step_response_8py.html" title="Test program to communicate with nucleo board through serial USB connection.">StepResponse.py</a> file is the User interface script that runs on the PC. This script asks for a Kp value input from the user and converts it to bytes. It then writes it over serial to the COM port. This Kp value is immediately read by serial. It also is being read on <a class="el" href="main_8py.html" title="Implements proportional control for motors connected to nucleo board provided in ME 405 lab.">main.py</a> through the input() command. It acts like a uart.read() <br  />
 [3] Thus, <a class="el" href="main_8py.html" title="Implements proportional control for motors connected to nucleo board provided in ME 405 lab.">main.py</a> is updated with the user inputted Kp from the front end and it collects data accordingly. This data is printed to the console <br  />
 [4] This data is read over serial on the PC, and then used to plot the step response of position vs time. <br  />
 </p>
<h1><a class="anchor" id="ss_Kp"></a>
Controlling Small DC Motors</h1>
<p >First, we used positional control to analyze the small DC motors that are given in the ME 405 kit. These plots are shown below. The Kp value of 25 in Figure 4 yields a step response with the position closest to setpoint (small steady state error) and unnoticeable overshoot. </p><div class="image">
<img src="kp_15.png" alt=""/>
<div class="caption">
Figure 3: Kp = 15</div></div>
 <div class="image">
<img src="kp_25.png" alt=""/>
<div class="caption">
Figure 4: Kp = 25 (Best)</div></div>
 <div class="image">
<img src="kp_50.png" alt=""/>
<div class="caption">
Figure 5: Kp = 50</div></div>
 <div class="image">
<img src="kp_150.png" alt=""/>
<div class="caption">
Figure 6: Kp = 150</div></div>
 <div class="image">
<img src="kp_200.png" alt=""/>
<div class="caption">
Figure 7: Kp = 200</div></div>
 <h1><a class="anchor" id="ss_Flywheel"></a>
Controlling a Motor attached to a Flywheel</h1>
<p >A flywheel adds additional inertia to the motor. This increases the amount of effort that the motor must spin. This flywheel is shown below in Figure 8. </p><div class="image">
<img src="flywheel.jpg" alt=""/>
<div class="caption">
Figure 8: Motor attached to flywheel</div></div>
<p> The step response plots with this added inertia are shown below. </p><div class="image">
<img src="Flywheel_Kp_10.png" alt=""/>
<div class="caption">
Figure 9: Kp = 10</div></div>
 <div class="image">
<img src="Flywheel_Kp_20.png" alt=""/>
<div class="caption">
Figure 10: Kp = 20</div></div>
 <div class="image">
<img src="Flywheel_Kp_50.png" alt=""/>
<div class="caption">
Figure 11: Kp = 50 (BEST)</div></div>
 <div class="image">
<img src="Flywheel_Kp_200.png" alt=""/>
<div class="caption">
Figure 12: Kp = 200</div></div>
 <h1><a class="anchor" id="ss_ref"></a>
References</h1>
<p >[1] Baver, Kristin. “8 Great Life Teachings from Yoda.” StarWars.com, 5 June 2017, <a href="https://www.starwars.com/news/8-great-life-teachings-from-yoda">https://www.starwars.com/news/8-great-life-teachings-from-yoda</a>. <br  />
 [2] Ridgeley, John, ME 405 Lab #2 Control Freaks, W22lab2.html, January 27, 2022 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
